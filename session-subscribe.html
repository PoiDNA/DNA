<!DOCTYPE html>
<html lang="pl"><head><meta charset="UTF-8"><title>Subskrypcja</title>
<style>/* â€¦ dokÅ‚adnie te same style â€¦ */</style></head><body>

<button id="toggleBtn">ðŸ”” Informuj mnie o sesjach</button>

<div id="formWrap">
  <form id="subForm">
    <div class="row">
      <label class="emailField"><input type="email" id="email" placeholder="Email" required></label>
      <label class="regionField">
        <select id="regionDropdown" required>â€¦lista regionÃ³wâ€¦</select>
      </label>
    </div>
    <button id="submitBtn" type="submit">Zapisz</button>
  </form>
  <div id="status"></div>
</div>

<script>
/* â€¦ (mapa REGIONS, auto-region, toggle) â€¦ */

/* â€”â€” â¬‡ wysyÅ‚amy dane do strony Wix zamiast fetchâ€™a â¬‡ â€”â€” */
form.onsubmit = e => {
  e.preventDefault();
  const payload = { email: email.value.trim(), region: region.value };
  window.parent.postMessage({ subscribe: payload }, '*');
  status.textContent = 'â³ wysyÅ‚anieâ€¦';
};

/* â€”â€” odbieramy informacjÄ™ zwrotnÄ… â€”â€” */
window.addEventListener('message', ev => {
  if (ev.data?.saved) status.textContent = 'DziÄ™kujemy! Zapisano âœ…';
  if (ev.data?.error) status.textContent = 'âŒ ' + ev.data.error;
});

/* â€”â€” e-mail z rodzica â€”â€” */
window.addEventListener('message', ev => {
  if (ev.data && 'email' in ev.data) {
    email.value = ev.data.email || '';
    if (ev.data.email) email.placeholder = '';
  }
});
</script></body></html>
